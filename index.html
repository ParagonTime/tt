<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dimpl Nights at Kill4Pill's</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #fff;
    margin: 0;
    overflow: hidden;
  }

  /* Основной фон */
  #game-container {
    position: relative;
    width: 1600px;
    height: 900px;
    margin: auto;
    background: url('https://i.imgur.com/your-office-background.jpg') no-repeat center center;
    background-size: cover;
    background-color: rgb(72, 73, 3);
    
    overflow: hidden;
    z-index: 1;
  }

  /* Слой Start */
  #start-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 40;
  }

  /* Слой Pause */
  #pause-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 38;
  }

  #pause-layer button {
    padding: 20px 40px;
    font-size: 24px;
    color: white;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
    margin: 10px;
  }

  #continue-button {
    background-color: green;
  }

  #pause-reset-button {
    background-color: red;
  }

  #disclaimer-text {
    color: red;
    font-size: 18px;
    margin-bottom: 20px;
    text-align: center;
    max-width: 600px;
  }

  #start-button {
    padding: 20px 40px;
    font-size: 24px;
    background-color: red;
    color: white;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
  }

  /* Окно камеры */
  #camera-window {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 900px;
    height: 900px;
    overflow: hidden;
    border: 2px solid #fff;
    z-index: 20;
    pointer-events: none;
  }

  /* Камеры внутри окна */
  .camera {
    position: absolute;
    width: 1600px;
    height: 900px;
    display: none;
    background-size: cover;
    background-position: center;
    z-index: 20;
  }
  #cam1 { background-image: url('https://i.imgur.com/your-cam1.jpg'); }
  #cam2 { background-image: url('https://i.imgur.com/your-cam2.jpg'); }
  #cam3 { background-image: url('https://i.imgur.com/your-cam3.jpg'); }
  #cam4 { background-image: url('https://i.imgur.com/your-cam4.jpg'); }
  #cam5 { background-image: url('https://i.imgur.com/your-cam5.jpg'); }
  #cam6 { background-image: url('https://i.imgur.com/your-cam6.jpg'); }
  #cam7 { background-image: url('https://i.imgur.com/your-cam7.jpg'); }

  /* Движущийся фон с элементами */
  #movable-background {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-out;
  }

  /* Кнопки дверей и света */
  #door-left, #door-right {
    position: absolute;
    top: 200px;
    width: 150px;
    height: 200px;
    background-color: rgba(255, 0, 0, 0.5);
    cursor: pointer;
    z-index: 3;
  }
  #door-left { left: 0; }
  #door-right { right: 0; }

  #light-left, #light-right {
    position: absolute;
    top: 180px;
    width: 50px;
    height: 50px;
    background-color: grey;
    border-radius: 50%;
    cursor: pointer;
    z-index: 3;
  }
  #light-left { left: 160px; }
  #light-right { right: 160px; }

  /* Панель управления камерами */
  #cam-buttons {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 21;
    pointer-events: auto;
  }
  .cam-btn {
    display: inline-block;
    margin: 5px;
    padding: 10px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
  }

  /* Индикатор энергии */
  #power-bar {
    position: absolute;
    bottom: 10px;
    left: 10px;
    width: 200px;
    height: 20px;
    background-color: gray;
    z-index: 20;
  }
  #power-fill {
    width: 100%;
    height: 100%;
    background-color: green;
  }

  /* Часы */
  #clock {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    z-index: 20;
  }

  /* GAME OVER */
  #game-over {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: red;
    display: none;
    z-index: 30;
  }

  /* Reset button */
  #reset-button {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    color: white;
    background-color: red;
    padding: 10px 20px;
    cursor: pointer;
    display: none;
    pointer-events: auto;
    z-index: 32;
  }

  /* Twitch-плеер */
  #twitch-player {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    width: 640px;
    height: 360px;
    background-color: #000;
    z-index: 10;
    border: 2px solid #fff;
  }

  #camera-slider-container {
    position: absolute;
    bottom: 20px;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 21;
    pointer-events: auto;
  }

  #camera-slider {
    width: 300px;
    height: 10px;
    -webkit-appearance: none;
    background: white;
    outline: none;
    border-radius: 5px;
  }

  #camera-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    cursor: pointer;
  }

  #camera-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    cursor: pointer;
    border: none;
  }

  /* Кнопки под Twitch-плеером */
  #random-channel-btn,
  #resize-button,
  #vhs-toggle-btn,
  #hard-vhs-btn {
    position: absolute;
    bottom: -50px;
    right: 180px;
    width: 50px;
    height: 50px;
    background-color: #4B0082; /* Темно-фиолетовый цвет */
    font-size: 10px;
    color: white;
    text-transform: uppercase;
    border: none;
    cursor: pointer;
    z-index: 21;
    overflow: hidden; /* Для ограничения эффектов внутри кнопки */
  }
  
  /* VHS Effect */
  #vhs-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    mix-blend-mode: overlay;
    overflow: hidden;
  }
  
  /* Hard VHS эффекты для Twitch плеера */
  #vhs-effect.hard-vhs::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      90deg,
      transparent,
      rgba(112, 109, 78, 0.699) 2px,
      transparent 4px
    );
    animation: hard-vhs-ripple 1.7s infinite linear;
    opacity: 0.8;
    pointer-events: none;
  }

  /* Зернистость для Hard VHS */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVR42mNkYGBgYGGhoaFgYGD4z4AEyCMBDJCQkEBhYWEBAQMDA0MjIyMjAwMDAxMTExMTEwMDAwMAJ7oDAD3bKgIAAAAASUVORK5CYII=');
    background-size: 10px 10px; /* Размер зерна */
    opacity: 0.55;
    animation: hard-vhs-grain 0.4s infinite steps(4);
    pointer-events: none;
  }

  /* Анимации для Hard VHS */
  @keyframes hard-vhs-ripple {
    0% { background-position: 0 0; }
    100% { background-position: 20px 0; }
  }

  @keyframes hard-vhs-grain {
    0% { transform: translate(0, 0); }
    25% { transform: translate(1px, 1px); }
    50% { transform: translate(-1px, -1px); }
    75% { transform: translate(2px, -2px); }
    100% { transform: translate(0, 0); }
  }

  @keyframes hard-vhs-lines {
    0% { transform: translateY(0); }
    100% { transform: translateY(4px); }
  }

  #random-channel-btn {
    right: 0;
    background-color: purple;
  }
  #resize-button {
    right: 60px;
    background-color: orange;
  }
  #vhs-toggle-btn {
    right: 120px;
    background-color: pink;
    font-size: 10px;
    color: white;
    text-transform: uppercase;
  }
  #hard-vhs-btn {
    right: 180px;
    background-color: #4B0082;
    font-size: 10px;
    color: white;
    text-transform: uppercase;
  }

  /* Левый паддинг */
  #left-padding {
    position: fixed;
    top: 0;
    left: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }
  
  /* Правый паддинг */
  #right-padding {
    position: fixed;
    top: 0;
    right: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }

  .vhs-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(255, 255, 255, 0.4);
    animation: vhs-lines 2s infinite linear;
  }
  .vhs-line:nth-child(1) { top: 10%; }
  .vhs-line:nth-child(2) { top: 30%; }
  .vhs-line:nth-child(3) { top: 50%; }
  .vhs-line:nth-child(4) { top: 70%; }
  .vhs-line:nth-child(5) { top: 90%; }
  .vhs-glitch {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.1);
    animation: vhs-glitch 1s infinite steps(5);
  }
  @keyframes vhs-lines {
    0% { transform: translateY(0); }
    100% { transform: translateY(5px); }
  }
  @keyframes vhs-glitch {
    0% { transform: translateX(0); }
    20% { transform: translateX(2px); }
    40% { transform: translateX(-2px); }
    60% { transform: translateX(1px); }
    80% { transform: translateX(-1px); }
    100% { transform: translateX(0); }
  }
</style>
</head>
<body>
<div id="game-container">
  <!-- Start Layer -->
  <div id="start-layer">
    <div id="disclaimer-text">Disclaimer</div>
    <div id="disclaimer-text">
      Игра содержит скримеры, громкие звуки, яркие вспышки, ненормативную лексику, сцены насилия и сексуализированный контент, созданный разработчиками или третьими сторонами. Она предназначена исключительно для лиц старше 21 года.
      Если вы страдаете эпилепсией, светочувствительностью или легко подвержены стрессу, рекомендуется воздержаться от игры. Используйте наушники на низкой громкости и делайте перерывы.
      Разработчики не несут ответственности за любой физический или психологический дискомфорт, возникший в результате взаимодействия с игрой. Игрок полностью берёт на себя ответственность за решение играть.
      Нажимая кнопку "Start" или начав игру, вы подтверждаете, что вам исполнилось 21 год, вы ознакомились с данным предупреждением и принимаете все возможные риски. Если вы не согласны, пожалуйста, воздержитесь от игры.</div>
    <button id="start-button" onclick="startGame()">START</button>
  </div>

  <!-- Pause Layer -->
  <div id="pause-layer">
    <button id="continue-button" onclick="continueGame()">CONTINUE</button>
    <button id="pause-reset-button" onclick="resetGame()">RESET</button>
  </div>

  <!-- Левый паддинг -->
  <div id="left-padding"></div>
  <!-- Правый паддинг -->
  <div id="right-padding"></div>

  <!-- Движущийся фон с элементами -->
  <div id="movable-background">
    <!-- Кнопки дверей и света -->
    <div id="door-left"></div>
    <div id="door-right"></div>
    <div id="light-left"></div>
    <div id="light-right"></div>

    <!-- Twitch-плеер -->
    <div id="twitch-player">
      <iframe 
        id="twitch-iframe"
        src="https://player.twitch.tv/?channel=cabbakid&parent=paragontime.github.io" 
        frameborder="0" 
        allowfullscreen="true" 
        scrolling="no" 
        height="360" 
        width="640">
      </iframe>
      <button id="random-channel-btn" onclick="changeTwitchChannel()"></button>
      <button id="resize-button" onclick="resizeTwitchPlayer()"></button>
      <button id="hard-vhs-btn" onclick="toggleHardVHSEffects()">HARD VHS</button>
      <button id="vhs-toggle-btn" onclick="toggleVHSEffects()">VHS ON</button>
      <!-- VHS Effect -->
      <div id="vhs-effect">
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-glitch"></div>
        <div class="vhs-ripple"></div>
        <div class="vhs-grain"></div>
      </div>
    </div>
  </div>

  <!-- Окно камеры -->
  <div id="camera-window">
    <div id="cam1" class="camera"></div>
    <div id="cam2" class="camera"></div>
    <div id="cam3" class="camera"></div>
    <div id="cam4" class="camera"></div>
    <div id="cam5" class="camera"></div>
    <div id="cam6" class="camera"></div>
    <div id="cam7" class="camera"></div>

    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="cam-buttons">
      <div class="cam-btn" onclick="changeCamera('cam1')">CAM 1</div>
      <div class="cam-btn" onclick="changeCamera('cam2')">CAM 2</div>
      <div class="cam-btn" onclick="changeCamera('cam3')">CAM 3</div>
      <div class="cam-btn" onclick="changeCamera('cam4')">CAM 4</div>
      <div class="cam-btn" onclick="changeCamera('cam5')">CAM 5</div>
      <div class="cam-btn" onclick="changeCamera('cam6')">CAM 6</div>
      <div class="cam-btn" onclick="changeCamera('cam7')">CAM 7</div>
    </div>
    <div id="camera-slider-container">
      <input 
        type="range" 
        id="camera-slider" 
        min="-350" 
        max="350" 
        value="0" 
        oninput="moveCamera()" 
      />
    </div>
    <div id="clock">12:00 AM</div>
    <div id="game-over">GAME OVER</div>
    <div id="reset-button" onclick="resetGame()">RESET</div>
  </div>
</div>

<script>
let currentCamera = null;
let power = 100;
let time = 0;
let gameOver = false;
let powerDrain = 0.15;
let gameStarted = false;
let isPaused = false;
let gameInterval;
let freddyInterval;
const twitchChannels = ["cabbakid", "arolfish", "kill4pill", "hvorostdumb"];

function startGame() {
  gameStarted = true;
  document.getElementById('start-layer').style.display = 'none';
  
  // Start game timers only after clicking Start
  gameInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused) {
      updatePower();
      updateTime();
    }
  }, 1000);

  // Start Freddy movement only after clicking Start
  freddyInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused && Math.random() < 0.1) {
      const cameras = ['cam1', 'cam2', 'cam3', 'cam4', 'cam5', 'cam6', 'cam7'];
      const randomCam = cameras[Math.floor(Math.random() * cameras.length)];
      document.getElementById(randomCam).style.backgroundImage = "url('https://i.imgur.com/your-freddy.jpg')";
      setTimeout(() => {
        document.getElementById(randomCam).style.backgroundImage = '';
      }, 2000);
    }
  }, 5000);
}

// Обработчик нажатия клавиши Esc
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape' && gameStarted && !gameOver) {
    togglePause();
  }
});

function togglePause() {
  isPaused = !isPaused;
  const pauseLayer = document.getElementById('pause-layer');
  pauseLayer.style.display = isPaused ? 'flex' : 'none';
}

function continueGame() {
  togglePause();
}

// Двери и свет
document.getElementById('door-left').addEventListener('click', toggleDoorLeft);
document.getElementById('door-right').addEventListener('click', toggleDoorRight);
document.getElementById('light-left').addEventListener('click', toggleLightLeft);
document.getElementById('light-right').addEventListener('click', toggleLightRight);

// Установка начального состояния дверей и света
document.getElementById('door-left').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
document.getElementById('door-right').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
document.getElementById('light-left').style.backgroundColor = 'gray';
document.getElementById('light-right').style.backgroundColor = 'gray';

function changeCamera(camId) {
  if (currentCamera) document.getElementById(currentCamera).style.display = 'none';
  document.getElementById(camId).style.display = 'block';
  currentCamera = camId;
}

function toggleDoorLeft() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-left');
  const isOpen = door.style.backgroundColor === 'rgba(0, 255, 0, 0.5)';
  door.style.backgroundColor = isOpen ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 255, 0, 0.5)';
  powerDrain += isOpen ? -0.125 : 0.125;
}

function toggleDoorRight() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-right');
  const isOpen = door.style.backgroundColor === 'rgba(0, 255, 0, 0.5)';
  door.style.backgroundColor = isOpen ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 255, 0, 0.5)';
  powerDrain += isOpen ? -0.125 : 0.125;
}

function toggleLightLeft() {
  if (!gameStarted || isPaused) return;
  const light = document.getElementById('light-left');
  const isOn = light.style.backgroundColor === 'yellow';
  light.style.backgroundColor = isOn ? 'gray' : 'yellow';
  powerDrain += isOn ? -0.125 : 0.125;
}

function toggleLightRight() {
  if (!gameStarted || isPaused) return;
  const light = document.getElementById('light-right');
  const isOn = light.style.backgroundColor === 'yellow';
  light.style.backgroundColor = isOn ? 'gray' : 'yellow';
  powerDrain += isOn ? -0.125 : 0.125;
}

function updatePower() {
  if (power <= 0) {
    endGame();
    return;
  }
  power -= powerDrain;
  document.getElementById('power-fill').style.width = power + '%';
}

function updateTime() {
  time++;
  let hours = Math.floor(time / 60);
  let minutes = time % 60;
  const clock = document.getElementById('clock');
  clock.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} AM`;
  if (hours >= 6) {
    alert('You survived!');
    resetGame();
  }
}

function endGame() {
  gameOver = true;
  document.getElementById('game-over').style.display = 'block';
  document.getElementById('reset-button').style.display = 'block';
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
}

function resetGame() {
  power = 100;
  time = 0;
  gameOver = false;
  gameStarted = false;
  isPaused = false;
  powerDrain = 0.15;
  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over').style.display = 'none';
  document.getElementById('reset-button').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('start-layer').style.display = 'flex';
  document.getElementById('pause-layer').style.display = 'none';
  
  // Сброс состояния дверей и света
  document.getElementById('door-left').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
  document.getElementById('door-right').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
  document.getElementById('light-left').style.backgroundColor = 'gray';
  document.getElementById('light-right').style.backgroundColor = 'gray';
  
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
}

function randomTwitchChannel() {
  const randomIndex = Math.floor(Math.random() * twitchChannels.length);
  return twitchChannels[randomIndex];
}

function changeTwitchChannel() {
  const newChannel = randomTwitchChannel();
  const iframe = document.getElementById('twitch-iframe');
  iframe.src = `https://player.twitch.tv/?channel=${newChannel}&parent=paragontime.github.io`;
}

let areVHSEffectsEnabled = true;
let areHardVHSEffectsEnabled = false;

function toggleVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('vhs-toggle-btn');
  const hardButton = document.getElementById('hard-vhs-btn');
  
  if (areVHSEffectsEnabled) {
    vhsEffect.style.display = 'none';
    button.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем VHS, выключаем Hard VHS
    if (areHardVHSEffectsEnabled) {
      areHardVHSEffectsEnabled = false;
      hardButton.textContent = 'HARD VHS';
      vhsEffect.classList.remove('hard-vhs');
    }
    
    vhsEffect.style.display = 'block';
    button.textContent = 'VHS ON';
    areVHSEffectsEnabled = true;
    
    // Восстанавливаем обычные VHS эффекты
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'vhs-lines 2s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 1s infinite steps(5)';
  }
}

function toggleHardVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('hard-vhs-btn');
  const normalButton = document.getElementById('vhs-toggle-btn');

  if (areHardVHSEffectsEnabled) {
    // Отключаем Hard VHS эффекты
    vhsEffect.classList.remove('hard-vhs');
    button.textContent = 'HARD VHS';
    areHardVHSEffectsEnabled = false;
    
    // Полностью отключаем все VHS эффекты
    vhsEffect.style.display = 'none';
    normalButton.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем Hard VHS, выключаем обычный VHS
    if (areVHSEffectsEnabled) {
      areVHSEffectsEnabled = false;
      normalButton.textContent = 'VHS OFF';
    }
    
    vhsEffect.style.display = 'block';
    vhsEffect.classList.add('hard-vhs');
    button.textContent = 'HARD VHS ON';
    areHardVHSEffectsEnabled = true;
    
    // Применяем эффекты Hard VHS
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'hard-vhs-lines 0.5s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 0.25s infinite steps(5)';
  }
}

function moveCamera() {
  const slider = document.getElementById('camera-slider');
  const movableBackground = document.getElementById('movable-background');
  
  // Перемещаем фон и элементы в противоположном направлении
  movableBackground.style.transform = `translateX(${-slider.value}px)`;
}

let isPlayerResized = false;

function resizeTwitchPlayer() {
  const player = document.getElementById('twitch-player');
  const iframe = document.getElementById('twitch-iframe');
  if (isPlayerResized) {
    // Возвращаем исходный размер
    player.style.width = '640px';
    player.style.height = '360px';
    player.style.top = '20%';
    iframe.width = '640';
    iframe.height = '360';
    isPlayerResized = false;
  } else {
    // Увеличиваем размер в два раза
    player.style.width = '1280px';
    player.style.height = '720px';
    player.style.top = '10%';
    iframe.width = '1280';
    iframe.height = '720';
    isPlayerResized = true;
  }
}
</script>
</body>
</html>
